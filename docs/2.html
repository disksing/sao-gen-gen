<!DOCTYPE HTML>
<html lang="zh-CN" style="height: 100%">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css" rel="stylesheet">
    <title>胡编生成器 | 骚话生成器生成器</title>
  </head>
  <body style="height: 100%">
    <div class="container" id="app" style="min-height: 100%;">
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">胡编生成器</a>
        <div class="ml-auto">
        <a href="https://github.com/disksing/sao-gen-gen/issues/new?labels=generator&template=generator.md" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
              <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
            </svg>
            创建新的生成器
          </a>
        </div>
      </nav>
      <div class="row mx-0 mt-3" style="padding: 20px; padding-bottom: 100px;">
        <form class="col-12">
          <div class="form-group row" v-for="v in variables">
            <label class="col-sm-3 col-form-label">{{ v.description }}</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" :placeholder="v.default" :key="v.id" v-model="v.value" />
            </div>
          </div>
        </form>
        <div class="col-12"><hr/></div>
        <div class="row col-12 mx-0 mt-3">
          <div class="ml-auto">
            <button type="button" class="btn btn-outline-primary mx-0 mr-0" v-on:click="updateTpl">重新生成</button>
            <button type="button" class="btn btn-outline-primary mx-0 mr-0" v-on:click="copy">复制至剪贴板</button>
            <button type="button" class="btn btn-outline-primary mx-0 mr-0" @click.preventDefault="printThis">保存图片</button>
          </div>
        </div>

        <div class="row col-12 mx-0 mt-3" ref="meme">
          <blockquote class="blockquote">
            <p v-html="content"></p>
          </blockquote>
        </div>
      </div>
    </div>

    <footer style="margin-top: -100px; width: 100%; line-height: 50px; background-color: #f5f5f5; text-align: center;">
      <div class="container">
        <a class="text-muted" href="https://github.com/disksing/sao-gen-gen">骚话生成器生成器@GitHub</a>
        <br/>
        <span class="text-muted">QQ交流群：481269635</span>
      </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.7/dist/html2canvas.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.3/js/bootstrap.min.js"></script>

    <script>
      var config = {"variables":[{"id":"event","description":"要评论的事件","default":"明星代孕"},{"id":"author","description":"作者的自称","default":"老胡"}],"templates":{"cheng":["{cheng0}{cheng0}","{cheng0}{cheng0}{cheng0}","{cheng0}{cheng0}{cheng0}{cheng0}"],"cheng0":["但{author}还是想把一些人的担心在这里提出来，从舆论的角度做出提前警示。","{prefix}就{author}而言，了解清楚{event}到底是一种怎么样的存在, 是解决问题的关键。","{prefix}就{author}个人来说,{event}对{author}的意义, 不能不说非常重大。","{author}也是经过了深思熟虑,在每个日日夜夜思考这个问题。","{author}今天要说些可能挨骂的话。","很多人不想看{event}的报导，我也不忍看它，因为想象一下就感觉很难受。","{prefix}近来由于{event}事件的发生，很多人都受委屈了。{event}，给那些群众造成的不便可想而知。"],"he":["所以在这个时候，我们大家一定要坚定地团结起来应对关于{event}的挑战。这是我们维护自身利益最为有效的途径。","{prefix}其实在社交媒体时代，形成关于{event}事件群众瞬间的集中释放是比较容易出现的，因为几乎没什么成本，如此而已。","{prefix}中国做得好的地方同样看到，我认为围绕{event}的舆论大环境已经变化。","{author}希望的是，{event}会是一个不断促进沟通和理解的过程。","{event}注定会给中国人留下深刻的印象，一些人担心中国不会进行深刻的反思，我不这样看。我相信，问题相当明显，从{event}以来，中国的反思就已经开始了。有些话并没有公开说透，但我们可以找到很多这些反思在进行中的明确证据。这，就是复杂中国的体现。 ","{author}作为高度关心{event}的媒体人衷心希望{event}能解决。"],"main":["{qi}\n\n{cheng}\n\n{zhuan}\n\n{he}\n"],"prefix":["","","","","","{prefix0}","{prefix0}","{prefix0}","{prefix0}","{prefix0}","{prefix0}","{prefix0}","{prefix0}"],"prefix0":["{author}觉得，","{author}认为，","{author}倡议，","{author}总结，","{author}看，","{author}想，","对于{event}，{author}有个基本判断，","与此同时，{author}必须说，","这不禁令{author}深思，"],"qi":["近期互联网上关于{event}的问题，{author}也看到了各方反应很是强烈。","大家还记得吗，就在几天以前，某些媒体大肆炒作{event}。话音未落，又爆出{event}真实的丑闻。","这两天，多地出现了关于{event}的热潮。但有些不属于合理的范围内，应当紧急叫停。","今天网上出现关于{event}的批评。","今天有两个人在微信里问我，最近的{event}是不是真的？我个人愿意相信，{event}是假的。尤其是，此前出过类似的情况，那些群众已经经历了测试。我相信并且希望{event}会是假的。"],"zhuan":["{zhuan2}{zhuan2}{zhuan2}","{zhuan2}{zhuan2}{zhuan2}{zhuan2}","{zhuan2}{zhuan2}{zhuan2}{zhuan2}{zhuan2}","{zhuan2}{zhuan2}{zhuan2}{zhuan2}{zhuan2}{zhuan2}","{zhuan2}{zhuan2}{zhuan2}{zhuan2}{zhuan2}{zhuan2}{zhuan2}","{zhuan2}{zhuan2}{zhuan2}{zhuan2}{zhuan2}{zhuan2}{zhuan2}{zhuan2}"],"zhuan0":["{prefix}除了有{event}这个事实，我认为面对接下来的巨大风险，我们还要形成了这样一个信念，","{author}在这篇博文的一开始就呼吁官方对于{event}进行说明。在这个声明到来之前，我想与网友们共同厘清一些基本的逻辑，","{author}不主张这个时候将主要精力用来往后看，","对{author}而言，{event}不仅仅是一个重大的事件，更是值得思考的一件事，","{author}作为媒体人还要更加慎重的审视这个问题，"],"zhuan1":["{prefix}如此眼花缭乱的信息博弈，半天的时间一件事就可以来回打滚。说实话，连{author}这样的老江湖有时都难分辨关于{event}，哪个信息是真的，哪个是假的，哪个属于搞错了，哪个是有人恶意制造的。","不能不说，一些媒体人关于{event}报导的倾向是很严重的，他们的做法不会给当事人赢来额外的尊重。希望他们克制自己的敏感神经，对{event}事件表现出最起码的责任感。这是他们应有的良知和理性。","{prefix}无论我们有多少怀疑，我们不应离开上述基本的逻辑。这一次受到强烈冲击的首先是所有关于{event}的人。说句实话，当我看到搞来搞去又是{event}成为了舆论怀疑和不满的目标时，我心里多少有点不是滋味。","{author}从来不反对舆论场上有多元的观点发生各种碰撞，但{author}认为{event}的这次事件堪称是一番露怯的表演。","{prefix}公众之所以对{event}很敏感，我认为主要是对以往情况不太满意，对{event}问题缺少信心，所以对事件的一些细节全都朝着最不利的方向去解读了。","{prefix}这不是什么大事，这样的不满情绪由来已久，它们总要通过一些契机和方式释放出来。其实在社交媒体时代，形成这种瞬间的集中释放是比较容易出现的，因为几乎没什么成本，如此而已。{author}还是主张多沟通。","{prefix}体制的相关设计要给社会必然存在的一些不满情绪留出必要的释放出口和空间，而不要让一切都处于刚性的管理之下。","{prefix}有些话并没有公开说透，在{event}的语境下也不会彻底说透，但我们可以找到很多这些反思在进行中的明确证据。","{prefix}以世界的眼光综观{event}的过程，不能不说，各种体制的社会看上去对阻止{event}有着各自的软肋。在开始阶段都不够坚决，眼看着风险出现了，但都有放不下的坛坛罐罐，心存各自的侥幸，直到那头灰犀牛以意外的速度闯到眼前。","我一点都不认为社会这样做是过分的，我认为对于{event}的反思是社会强烈进取心的表现，我们总是认为自己还有应当改善的空间，很担心纠错不彻底。其实{author}对改进和更加深刻的改革一直都很推崇，我们这样做的动作往往也很快。","{author}今天略作梳理{event}发生的过程和原因，是为了提醒当前案例所暴露的一些缺陷和问题。","{prefix}{event}的情况引起舆论强烈不满。除了舆论本身存在一些因{event}引起的怨气，也有其他的原因，{author}觉得{event}实在不应该。","{author}作为媒体人在此呼吁所有相关人士要以{event}为鉴。","我看到有报道说{event}可以这样解决，我认为这种办法值得研究参考。只要大家都诚心，问题总是能够得到解决。","可是，即使是这样，{event}的出现仍然代表了一定的意义。","在这种不可避免的冲突下，{author}认为，我们必须解决这个问题。"],"zhuan2":["{zhuan0}{zhuan1}","{zhuan1}","{zhuan1}"]}};

      var app = new Vue({
        el: "#app",
        data: {
          variables: config.variables,
          contentTpl: ""
        },
        created: function() {
          this.updateTpl();
        },
        methods: {
          async printThis() {
            console.log("printing..");
            const el = this.$refs.meme;

            const options = {
              type: "dataURL"
            };
            const printCanvas = await html2canvas(el, options);

            const link = document.createElement("a");
            link.setAttribute("download", "meme.png");
            link.setAttribute(
              "href",
              printCanvas
                .toDataURL("image/png")
                .replace("image/png", "image/octet-stream")
            );
            link.click();

            console.log("done");
          },
          updateTpl: function() {
            var templates = config.templates;
            for (k in templates) {
              var contents = templates[k];
              for (var i = contents.length-1; i > 0; i--) {
                var j = Math.floor(Math.random() * i);
                var tmp = contents[i];
                contents[i] = contents[j];
                contents[j] = tmp;
              }
            }

            var index = {};
            function expand(key, depth) {
              if (depth >= 16) {
                return "";
              }

              if (index[key] == null || index[key] >= templates[key].length) {
                index[key] = 0;
              }
              var t = templates[key][index[key]];
              index[key]++;

              out: while (true) {
                for (k in templates) {
                  if (t.search('{'+k+'}') != -1) {
                    t = t.replace('{'+k+'}', expand(k, depth+1));
                    continue out;
                  }
                }
                break;
              };
              return t;
            }
            this.contentTpl = expand('main', 0);
          },
          getContent: function(ty) {
            var t = this.contentTpl;
            for (i in this.variables) {
              var v = this.variables[i];
              var s = v.default;
              if (v.value != null && v.value.length > 0) {
                s = v.value;
              }
              if (ty == "html") {
                s = '<strong>'+s+'</strong>'
              }
              t = t.replaceAll('{'+v.id+'}', s);
            }
            if (ty == "html") {
              t = t.replaceAll('\n', '<br/>');
            }
            return t;
          },
          copy: function() {
            navigator.clipboard.writeText(this.getContent("plain")).then(function() {
            }, function() {
            });
          }
        },
        computed: {
          content: function() { return this.getContent("html"); }
        }
      });

    </script>
  </body>
</html>
